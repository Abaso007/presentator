import{S as I,i as J,s as K,L as O,c as L,m as C,t as S,a as q,d as N,f as Q,F as Y,g as d,h as b,j as n,z as k,k as P,l as u,o as F,q as U,u as H,v as V,n as M,y as j,p as y,b as W,e as X,D as R,E as A}from"./index-BVdqMnkj.js";function Z(f){let e,s,a,i,o,t,c,p,_;return{c(){e=d("div"),s=d("label"),a=d("i"),o=b(),t=d("input"),n(a,"class","iconoir-lock"),n(s,"for",i=f[7]),n(s,"class","addon prefix"),t.required=!0,n(t,"type","password"),n(t,"id",c=f[7]),n(t,"placeholder","New password"),n(e,"class","field-group")},m(l,m){P(l,e,m),u(e,s),u(s,a),u(e,o),u(e,t),R(t,f[0]),p||(_=[H(A.call(null,s,{position:"left",text:"New password"})),F(t,"input",f[5])],p=!0)},p(l,m){m&128&&i!==(i=l[7])&&n(s,"for",i),m&128&&c!==(c=l[7])&&n(t,"id",c),m&1&&t.value!==l[0]&&R(t,l[0])},d(l){l&&M(e),p=!1,j(_)}}}function x(f){let e,s,a,i,o,t,c,p,_;return{c(){e=d("div"),s=d("label"),a=d("i"),o=b(),t=d("input"),n(a,"class","iconoir-lock"),n(s,"for",i=f[7]),n(s,"class","addon prefix"),t.required=!0,n(t,"type","password"),n(t,"id",c=f[7]),n(t,"placeholder","New password confirm"),n(e,"class","field-group")},m(l,m){P(l,e,m),u(e,s),u(s,a),u(e,o),u(e,t),R(t,f[1]),p||(_=[H(A.call(null,s,{position:"left",text:"New password confirm"})),F(t,"input",f[6])],p=!0)},p(l,m){m&128&&i!==(i=l[7])&&n(s,"for",i),m&128&&c!==(c=l[7])&&n(t,"id",c),m&2&&t.value!==l[1]&&R(t,l[1])},d(l){l&&M(e),p=!1,j(_)}}}function ee(f){let e,s,a,i,o,t,c,p,_,l,m,$,z,v,w,h,T,B;return a=new Q({}),p=new Y({props:{class:"form-field form-field-lg",name:"password",$$slots:{default:[Z,({uniqueId:r})=>({7:r}),({uniqueId:r})=>r?128:0]},$$scope:{ctx:f}}}),l=new Y({props:{class:"form-field form-field-lg",name:"passwordConfirm",$$slots:{default:[x,({uniqueId:r})=>({7:r}),({uniqueId:r})=>r?128:0]},$$scope:{ctx:f}}}),{c(){e=d("div"),s=d("header"),L(a.$$.fragment),i=b(),o=d("form"),t=d("h4"),t.textContent=`${G}`,c=b(),L(p.$$.fragment),_=b(),L(l.$$.fragment),m=b(),$=d("button"),$.innerHTML='<span class="txt">Reset password</span>',z=b(),v=d("div"),w=d("a"),w.innerHTML='<div class="txt">Back to Login</div>',n(s,"class","block txt-center m-b-base"),n(t,"class","m-b-base"),n($,"type","submit"),n($,"class","btn btn-block btn-lg btn-primary"),k($,"btn-disabled",f[2]),k($,"btn-loading",f[2]),n(o,"class","panel txt-center"),n(w,"href","/login"),n(w,"class","fade link-prev"),n(v,"class","block txt-center m-t-base"),n(e,"class","wrapper wrapper-sm m-b-base entrance-top")},m(r,g){P(r,e,g),u(e,s),C(a,s,null),u(e,i),u(e,o),u(o,t),u(o,c),C(p,o,null),u(o,_),C(l,o,null),u(o,m),u(o,$),u(e,z),u(e,v),u(v,w),h=!0,T||(B=[F(o,"submit",U(f[3])),H(V.call(null,w))],T=!0)},p(r,g){const D={};g&385&&(D.$$scope={dirty:g,ctx:r}),p.$set(D);const E={};g&386&&(E.$$scope={dirty:g,ctx:r}),l.$set(E),(!h||g&4)&&k($,"btn-disabled",r[2]),(!h||g&4)&&k($,"btn-loading",r[2])},i(r){h||(S(a.$$.fragment,r),S(p.$$.fragment,r),S(l.$$.fragment,r),h=!0)},o(r){q(a.$$.fragment,r),q(p.$$.fragment,r),q(l.$$.fragment,r),h=!1},d(r){r&&M(e),N(a),N(p),N(l),T=!1,j(B)}}}function te(f){let e,s;return e=new O({props:{fullpage:!0,header:!1,title:G,$$slots:{default:[ee]},$$scope:{ctx:f}}}),{c(){L(e.$$.fragment)},m(a,i){C(e,a,i),s=!0},p(a,[i]){const o={};i&263&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){s||(S(e.$$.fragment,a),s=!0)},o(a){q(e.$$.fragment,a),s=!1},d(a){N(e,a)}}}const G="Reset password";function se(f,e,s){let{params:a}=e,i="",o="",t=!1;async function c(){if(!t){s(2,t=!0);try{await y.collection("users").confirmPasswordReset(a==null?void 0:a.token,i,o),y.authStore.clear(),W("You can now login with your new password.",4e3),X("/login")}catch(l){y.error(l)}s(2,t=!1)}}function p(){i=this.value,s(0,i)}function _(){o=this.value,s(1,o)}return f.$$set=l=>{"params"in l&&s(4,a=l.params)},[i,o,t,c,a,p,_]}class le extends I{constructor(e){super(),J(this,e,se,te,K,{params:4})}}export{le as default};
