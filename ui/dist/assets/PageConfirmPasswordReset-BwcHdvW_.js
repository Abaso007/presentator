import{S as I,i as J,s as K,L as O,d as C,t as L,a as S,m as N,c as R,f as Q,F as z,g as P,o as F,C as k,h as H,j as u,v as M,w as j,x as U,y as V,k as d,l as b,n,p as y,b as W,e as X,D as T,E as A}from"./index-C60HBsJo.js";function Z(f){let e,s,a,i,o,t,c,p,_;return{c(){e=d("div"),s=d("label"),a=d("i"),o=b(),t=d("input"),n(a,"class","iconoir-lock"),n(s,"for",i=f[7]),n(s,"class","addon prefix"),t.required=!0,n(t,"type","password"),n(t,"id",c=f[7]),n(t,"placeholder","New password"),n(e,"class","field-group")},m(l,m){H(l,e,m),u(e,s),u(s,a),u(e,o),u(e,t),T(t,f[0]),p||(_=[j(A.call(null,s,{position:"left",text:"New password"})),M(t,"input",f[5])],p=!0)},p(l,m){m&128&&i!==(i=l[7])&&n(s,"for",i),m&128&&c!==(c=l[7])&&n(t,"id",c),m&1&&t.value!==l[0]&&T(t,l[0])},d(l){l&&P(e),p=!1,F(_)}}}function x(f){let e,s,a,i,o,t,c,p,_;return{c(){e=d("div"),s=d("label"),a=d("i"),o=b(),t=d("input"),n(a,"class","iconoir-lock"),n(s,"for",i=f[7]),n(s,"class","addon prefix"),t.required=!0,n(t,"type","password"),n(t,"id",c=f[7]),n(t,"placeholder","New password confirm"),n(e,"class","field-group")},m(l,m){H(l,e,m),u(e,s),u(s,a),u(e,o),u(e,t),T(t,f[1]),p||(_=[j(A.call(null,s,{position:"left",text:"New password confirm"})),M(t,"input",f[6])],p=!0)},p(l,m){m&128&&i!==(i=l[7])&&n(s,"for",i),m&128&&c!==(c=l[7])&&n(t,"id",c),m&2&&t.value!==l[1]&&T(t,l[1])},d(l){l&&P(e),p=!1,F(_)}}}function ee(f){let e,s,a,i,o,t,c,p,_,l,m,$,B,v,w,h,q,D;return a=new Q({}),p=new z({props:{class:"form-field form-field-lg",name:"password",$$slots:{default:[Z,({uniqueId:r})=>({7:r}),({uniqueId:r})=>r?128:0]},$$scope:{ctx:f}}}),l=new z({props:{class:"form-field form-field-lg",name:"passwordConfirm",$$slots:{default:[x,({uniqueId:r})=>({7:r}),({uniqueId:r})=>r?128:0]},$$scope:{ctx:f}}}),{c(){e=d("div"),s=d("header"),R(a.$$.fragment),i=b(),o=d("form"),t=d("h4"),t.textContent=`${G}`,c=b(),R(p.$$.fragment),_=b(),R(l.$$.fragment),m=b(),$=d("button"),$.innerHTML='<span class="txt">Reset password</span>',B=b(),v=d("div"),w=d("a"),w.innerHTML='<div class="txt">Back to Login</div>',n(s,"class","block txt-center m-b-base"),n(t,"class","m-b-base"),n($,"type","submit"),n($,"class","btn btn-block btn-lg btn-primary"),k($,"btn-disabled",f[2]),k($,"btn-loading",f[2]),n(o,"class","panel txt-center"),n(w,"href","/login"),n(w,"class","fade link-prev"),n(v,"class","block txt-center m-t-base"),n(e,"class","wrapper wrapper-sm m-b-base entrance-top")},m(r,g){H(r,e,g),u(e,s),N(a,s,null),u(e,i),u(e,o),u(o,t),u(o,c),N(p,o,null),u(o,_),N(l,o,null),u(o,m),u(o,$),u(e,B),u(e,v),u(v,w),h=!0,q||(D=[M(o,"submit",U(f[3])),j(V.call(null,w))],q=!0)},p(r,g){const E={};g&385&&(E.$$scope={dirty:g,ctx:r}),p.$set(E);const Y={};g&386&&(Y.$$scope={dirty:g,ctx:r}),l.$set(Y),(!h||g&4)&&k($,"btn-disabled",r[2]),(!h||g&4)&&k($,"btn-loading",r[2])},i(r){h||(S(a.$$.fragment,r),S(p.$$.fragment,r),S(l.$$.fragment,r),h=!0)},o(r){L(a.$$.fragment,r),L(p.$$.fragment,r),L(l.$$.fragment,r),h=!1},d(r){r&&P(e),C(a),C(p),C(l),q=!1,F(D)}}}function te(f){let e,s;return e=new O({props:{fullpage:!0,header:!1,title:G,$$slots:{default:[ee]},$$scope:{ctx:f}}}),{c(){R(e.$$.fragment)},m(a,i){N(e,a,i),s=!0},p(a,[i]){const o={};i&263&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){s||(S(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){C(e,a)}}}const G="Reset password";function se(f,e,s){let{params:a}=e,i="",o="",t=!1;async function c(){if(!t){s(2,t=!0);try{await y.collection("users").confirmPasswordReset(a==null?void 0:a.token,i,o),y.authStore.clear(),W("You can now login with your new password.",4e3),X("/login")}catch(l){y.error(l)}s(2,t=!1)}}function p(){i=this.value,s(0,i)}function _(){o=this.value,s(1,o)}return f.$$set=l=>{"params"in l&&s(4,a=l.params)},[i,o,t,c,a,p,_]}class le extends I{constructor(e){super(),J(this,e,se,te,K,{params:4})}}export{le as default};
